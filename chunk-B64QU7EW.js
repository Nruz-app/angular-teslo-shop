import{a as pe,b as h,c as fe,d as ge,e as ve,f as be,g as he,h as xe,i as _e,j as Pe}from"./chunk-XLUHUN37.js";import{a as Se,b as Ce,c as w,d as ye,e as Fe}from"./chunk-RTOL2ATM.js";import{A as y,Aa as me,B as q,Ba as G,C as a,Ca as E,G as f,Ha as ue,Ia as B,Ka as O,L as F,N as c,O as g,P,R as Q,S as L,T as I,U as r,V as i,W as d,X as j,Y as v,Z as x,a as ne,b as ie,ba as ae,c as _,ca as l,da as b,ea as S,g as V,ga as le,h as oe,ha as ee,ia as te,ja as re,na as $,oa as se,q as u,ra as de,s as z,t as N,u as Y,v as J,y as C,za as ce}from"./chunk-PJ4CBU4P.js";var H=class o{authService=u(O);user=$(()=>this.authService.user());static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-admin-dashboard-layout"]],decls:42,vars:1,consts:[[1,"bg-slate-800","overflow-y-scroll","w-screen","h-screen","antialiased","text-slate-300","selection:bg-blue-600","selection:text-white"],[1,"flex","flex-col","relative","w-screen"],["id","menu",1,"bg-gray-900","min-h-screen","z-10","text-slate-300","w-64","fixed","left-0","h-screen","overflow-y-scroll"],["id","logo",1,"my-4","px-6"],["routerLink","/",1,"text-lg","md:text-2xl","font-bold","text-white","font-montserrat","cursor-pointer"],[1,"text-blue-500"],[1,"text-slate-500","text-sm"],["id","profile",1,"px-6","py-10"],[1,"text-slate-500"],["href","#",1,"inline-flex","space-x-2","items-center"],["src","https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=128&q=80","alt","",1,"rounded-full","w-8","h-8"],[1,"text-sm","md:text-base","font-bold"],["id","nav",1,"w-full","px-6"],["routerLink","/admin/dashboard",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"],[1,"flex","flex-col"],[1,"text-lg","font-bold","leading-5","text-white"],[1,"text-sm","text-white/50","hidden","md:block"],["routerLink","/admin/products","routerLinkActive","bg-blue-800",1,"w-full","px-2","inline-flex","space-x-2","items-center","border-b","border-slate-700","py-3","hover:bg-white/5","transition","ease-linear","duration-150"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"],[1,"text-lg","text-slate-300","font-bold","leading-5"],[1,"text-sm","text-slate-500","hidden","md:block"],[1,"divider","my-2"],[1,"btn","btn-ghost","text-accent","w-full",3,"click"],[1,"flex-1","ml-64","pt-5","px-5"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l(5," Teslo"),r(6,"span",5),l(7," | Shop"),i()(),r(8,"p",6),l(9,"Manage your actions and activities"),i()(),r(10,"div",7)(11,"p",8),l(12,"Bienvenido,"),i(),r(13,"a",9)(14,"span"),d(15,"img",10),i(),r(16,"span",11),l(17),i()()(),r(18,"div",12)(19,"a",13)(20,"div"),Y(),r(21,"svg",14),d(22,"path",15),i()(),J(),r(23,"div",16)(24,"span",17),l(25,"Dashboard"),i(),r(26,"span",18),l(27,"Data Overview"),i()()(),r(28,"a",19)(29,"div"),Y(),r(30,"svg",20),d(31,"path",21),i()(),J(),r(32,"div",16)(33,"span",22),l(34,"Productos"),i(),r(35,"span",23),l(36,"Listado de productos"),i()()(),d(37,"div",24),r(38,"button",25),v("click",function(){return n.authService.logout()}),l(39," Cerrar sesi\xF3n "),i()()()(),r(40,"div",26),d(41,"router-outlet"),i()()),e&2){let s;a(17),S(" ",(s=n.user())==null?null:s.fullName," ")}},dependencies:[me,E],encapsulation:2})};function ke(){return _(this,null,function*(){return new Promise(o=>{setTimeout(()=>{o(!0)},2500)})})}var k=class o{static namePattern="([a-zA-Z]+) ([a-zA-Z]+)";static emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";static notOnlySpacesPattern="^[a-zA-Z0-9]+$";static slugPattern="^[a-z0-9_]+(?:-[a-z0-9_]+)*$";static getTextError(t){for(let e of Object.keys(t))switch(e){case"required":return"Este campo es requerido";case"minlength":return`M\xEDnimo de ${t.minlength.requiredLength} caracteres.`;case"min":return`Valor m\xEDnimo de ${t.min.min}`;case"email":return"El valor ingresado no es un correo electr\xF3nico";case"emailTaken":return"El correo electr\xF3nico ya est\xE1 siendo usado por otro usuario";case"noStrider":return"No se puede usar el username de strider en la app";case"pattern":return t.pattern.requiredPattern===o.emailPattern?"El valor ingresado no luce como un correo electr\xF3nico":"Error de patr\xF3n contra expresi\xF3n regular";default:return`Error de validaci\xF3n no controlado ${e}`}return null}static isValidField(t,e){return!!t.controls[e].errors&&t.controls[e].touched}static getFieldError(t,e){if(!t.controls[e])return null;let n=t.controls[e].errors??{};return o.getTextError(n)}static isValidFieldInArray(t,e){return t.controls[e].errors&&t.controls[e].touched}static getFieldErrorInArray(t,e){if(t.controls.length===0)return null;let n=t.controls[e].errors??{};return o.getTextError(n)}static isFieldOneEqualFieldTwo(t,e){return n=>{let s=n.get(t)?.value,m=n.get(e)?.value;return s===m?null:{passwordsNotEqual:!0}}}static checkingServerResponse(t){return _(this,null,function*(){return console.log("Validando contra servidor"),yield ke(),t.value==="hola@mundo.com"?{emailTaken:!0}:null})}static notStrider(t){return t.value==="strider"?{noStrider:!0}:null}};var U=class o{control=C.required();get errorMessage(){let t=this.control().errors||{};return this.control().touched&&Object.keys(t).length>0?k.getTextError(t):null}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["form-error-label"]],inputs:{control:[1,"control"]},decls:2,vars:1,consts:[[1,"text-red-500","text-xs"]],template:function(e,n){e&1&&(r(0,"span",0),l(1),i()),e&2&&(a(),b(n.errorMessage))},encapsulation:2})};function Te(o,t){if(o&1){let e=j();r(0,"button",15),v("click",function(){let s=z(e).$implicit,m=x();return N(m.onSizeClicked(s))}),l(1),i()}if(o&2){let e=t.$implicit,n=x();g("btn-secondary",n.productForm.value.sizes==null?null:n.productForm.value.sizes.includes(e)),a(),S(" ",e," ")}}function De(o,t){if(o&1&&d(0,"img",23),o&2){let e=t.$implicit;c("src",e,q)}}function Ae(o,t){o&1&&(r(0,"div",24)(1,"span"),l(2,"Datos actualizados correctamente"),i()())}var Z=class o{product=C.required();router=u(G);productService=u(w);sizes=["SX","S","M","L","XL"];fb=u(_e);wasSaved=y(!1);tempFile=y([]);fileList=y(void 0);fileToCarousel=$(()=>[...this.product().images,...this.tempFile()]);productForm=this.fb.group({title:["",h.required],description:["",h.required],slug:["",[h.required,h.pattern(k.slugPattern)]],price:[0,[h.required,h.min(0)]],stock:[0,[h.required,h.min(0)]],sizes:[[""]],images:[[]],tags:[""],gender:["men",[h.required,h.pattern(/men|women|kid|unisex/)]]});ngOnInit(){this.setFormValue(this.product())}setFormValue(t){this.productForm.reset(this.product()),this.productForm.patchValue({tags:t.tags?.join(",")})}onSizeClicked(t){let e=this.productForm.value.sizes??[];e.includes(t)?e.splice(e.indexOf(t),1):e.push(t),this.productForm.patchValue({sizes:e})}onSubmit(){return _(this,null,function*(){let t=this.productForm.valid;if(this.productForm.markAllAsTouched(),!t)return;let e=this.productForm.value,n=ie(ne({},e),{tags:e.tags?.toLowerCase().split(",").map(s=>s.trim()??[])});if(this.product().id==="new"){let s=yield V(this.productService.createProduct(n,this.fileList()));this.router.navigate(["/admin/products",s.id])}else yield V(this.productService.updateProduct(this.product().id,n,this.fileList()));this.wasSaved.set(!0),setTimeout(()=>{this.wasSaved.set(!1)},2e3)})}onFileChangerd(t){let e=t.target.files;this.fileList.set(e??void 0),this.tempFile.set([]);let n=Array.from(e??[]).map(s=>URL.createObjectURL(s));this.tempFile.set(n)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["product-details"]],inputs:{product:[1,"product"]},decls:46,vars:30,consts:[[1,"text-2xl","font-bold"],[1,"divider"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","font-bold","h-12"],["type","text","placeholder","T\xEDtulo","formControlName","title",1,"input","input-bordered","w-full"],[3,"control"],["type","text","placeholder","Slug","formControlName","slug",1,"input","input-bordered","w-full"],["placeholder","Descripci\xF3n","rows","6","formControlName","description",1,"textarea","textarea-bordered"],[1,"text-lg","font-bold"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],["type","number","placeholder","Precio","formControlName","price",1,"input","input-bordered","w-full"],["type","number","placeholder","Inventario","formControlName","stock",1,"input","input-bordered","w-full"],["type","text","placeholder","Tags","formControlName","tags",1,"input","input-bordered","w-full"],[1,"grid","grid-cols-4","gap-2"],["type","button",1,"btn","btn-sm",3,"click"],[1,"grid","grid-cols-6","gap-2"],["type","button",1,"btn","btn-sm",3,"btn-secondary"],[1,"flex","justify-end","h-12"],["type","submit",1,"btn","btn-secondary"],[3,"images"],["type","file","multiple","","accept","image/*",1,"file-input","file-input-bordered","w-full","mt-4",3,"change"],[1,"grid","grid-cols-3","sm:g","rid-cols-4","gap-2"],["alt","Temporal Image",1,"w-full","object-cover","rounded-xl",3,"src"],[1,"alert","alert-success","fixed","bottom-4","right-4","w-80","animate-fadeIn","z-50","translate-x-4"]],template:function(e,n){if(e&1&&(r(0,"h1",0),l(1),i(),d(2,"div",1),r(3,"form",2),v("ngSubmit",function(){return n.onSubmit()}),r(4,"div",3)(5,"h2",4),l(6,"Datos generales"),i(),d(7,"input",5)(8,"form-error-label",6)(9,"input",7)(10,"form-error-label",6)(11,"textarea",8)(12,"form-error-label",6),r(13,"h2",9),l(14,"Datos de venta"),i(),r(15,"div",10)(16,"div"),d(17,"input",11)(18,"form-error-label",6),i(),r(19,"div"),d(20,"input",12)(21,"form-error-label",6),i()(),d(22,"input",13)(23,"form-error-label",6),r(24,"div",14)(25,"button",15),v("click",function(){return n.productForm.patchValue({gender:"men"})}),l(26," Masculino "),i(),r(27,"button",15),v("click",function(){return n.productForm.patchValue({gender:"women"})}),l(28," Femenino "),i(),r(29,"button",15),v("click",function(){return n.productForm.patchValue({gender:"kid"})}),l(30," Kid "),i(),r(31,"button",15),v("click",function(){return n.productForm.patchValue({gender:"unisex"})}),l(32," Unisex "),i()(),r(33,"div",16),L(34,Te,2,3,"button",17,Q),i()(),r(36,"div",3)(37,"div",18)(38,"button",19),l(39," Guardar "),i()(),d(40,"product-carousel",20),r(41,"input",21),v("change",function(m){return n.onFileChangerd(m)}),i(),r(42,"div",22),L(43,De,1,1,"img",23,Q),i()()(),F(45,Ae,3,0,"div",24)),e&2){let s,m,p,T,D,A;a(),b(n.product().title),a(2),c("formGroup",n.productForm),a(4),g("border-red-500",(s=(s=n.productForm.get("title"))==null?null:s.errors)!==null&&s!==void 0?s:!1),a(),c("control",n.productForm.get("title")),a(),g("border-red-500",(m=(m=n.productForm.get("slug"))==null?null:m.errors)!==null&&m!==void 0?m:!1),a(),c("control",n.productForm.get("slug")),a(),g("border-red-500",(p=(p=n.productForm.get("description"))==null?null:p.errors)!==null&&p!==void 0?p:!1),a(),c("control",n.productForm.get("description")),a(5),g("border-red-500",(T=(T=n.productForm.get("price"))==null?null:T.errors)!==null&&T!==void 0?T:!1),a(),c("control",n.productForm.get("price")),a(2),g("border-red-500",(D=(D=n.productForm.get("stock"))==null?null:D.errors)!==null&&D!==void 0?D:!1),a(),c("control",n.productForm.get("stock")),a(),g("border-red-500",(A=(A=n.productForm.get("tags"))==null?null:A.errors)!==null&&A!==void 0?A:!1),a(),c("control",n.productForm.get("tags")),a(2),g("btn-primary",n.productForm.value.gender==="men"),a(2),g("btn-accent",n.productForm.value.gender==="women"),a(2),g("btn-warning",n.productForm.value.gender==="kid"),a(2),g("btn-secondary",n.productForm.value.gender==="unisex"),a(3),I(n.sizes),a(6),c("images",n.fileToCarousel()),a(3),I(n.tempFile()),a(2),P(n.wasSaved()?45:-1)}},dependencies:[Ce,Pe,ve,pe,be,fe,ge,he,xe,U],encapsulation:2})};function Ve(o,t){o&1&&(r(0,"div",0),d(1,"span",2),i())}function Le(o,t){if(o&1&&d(0,"product-details",1),o&2){let e=x();c("product",e.productResource.value())}}var X=class o{activatedRoute=u(ce);router=u(G);productService=u(w);productId=ue(this.activatedRoute.params.pipe(oe(t=>t.id)));productResource=B({request:()=>({id:this.productId()}),loader:({request:t})=>this.productService.getProductById(t.id)});redirectEffect=se(()=>{this.productResource.error()&&this.router.navigate(["/admin/products"])});static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-product-admin-page"]],decls:2,vars:2,consts:[[1,"flex","justify-center","items-center","h-screen"],[3,"product"],[1,"loading","loading-spinner","loading-lg"]],template:function(e,n){e&1&&F(0,Ve,2,0,"div",0)(1,Le,1,1,"product-details",1),e&2&&(P(n.productResource.isLoading()?0:-1),a(),P(n.productResource.hasValue()?1:-1))},dependencies:[Z],encapsulation:2})};var Ee=o=>["/admin/products",o],Ie=(o,t)=>t.id;function Me(o,t){if(o&1&&(r(0,"span",9),l(1),i()),o&2){let e=x().$implicit;a(),b(e.stock)}}function Re(o,t){if(o&1&&(r(0,"span",10),l(1),i()),o&2){let e=x().$implicit;a(),b(e.stock)}}function ze(o,t){if(o&1&&(r(0,"span",11),l(1),i()),o&2){let e=x().$implicit;a(),b(e.stock)}}function Ne(o,t){if(o&1&&(r(0,"tr")(1,"th")(2,"label"),d(3,"input",2),i()(),r(4,"td")(5,"div",3)(6,"div",4)(7,"div",5),d(8,"img",6),te(9,"productImage"),i()(),r(10,"div")(11,"a",7),l(12),i(),r(13,"div",8),l(14),i()()()(),r(15,"td"),l(16),te(17,"currency"),i(),r(18,"td"),F(19,Me,2,1,"span",9)(20,Re,2,1,"span",10)(21,ze,2,1,"span",11),i(),r(22,"th")(23,"a",12),l(24," Detalles "),i()()()),o&2){let e=t.$implicit;a(8),c("src",re(9,8,e.images),q)("alt",e.title),a(3),c("routerLink",ee(12,Ee,e.id)),a(),b(e.title),a(2),S(" ",e.sizes.join(", ")," "),a(2),S(" ",re(17,10,e.price)," "),a(3),P(e.stock<=10?19:e.stock<=20?20:21),a(4),c("routerLink",ee(14,Ee,e.id))}}var K=class o{products=C.required();static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["product-table"]],inputs:{products:[1,"products"]},decls:17,vars:0,consts:[[1,"overflow-x-auto"],[1,"table"],["type","checkbox",1,"checkbox"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","h-12","w-12"],[3,"src","alt"],[1,"font-bold","hover:text-accent","transition-colors","duration-300",3,"routerLink"],[1,"text-sm","opacity-50"],[1,"badge","badge-error"],[1,"badge","badge-warning"],[1,"badge","badge-success"],[1,"btn","btn-ghost","text-accent","btn-xs",3,"routerLink"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th")(5,"label"),d(6,"input",2),i()(),r(7,"th"),l(8,"T\xEDtulo"),i(),r(9,"th"),l(10,"Precio"),i(),r(11,"th"),l(12,"Inventario"),i(),d(13,"th"),i()(),r(14,"tbody"),L(15,Ne,25,16,"tr",null,Ie),i()()()),e&2&&(a(15),I(n.products()))},dependencies:[Se,E,de],encapsulation:2})};var qe=()=>[],W=class o{productsService=u(w);paginationService=u(ye);productsPerPage=y(10);productsResource=B({request:()=>({page:this.paginationService.currentPage()-1,limit:this.productsPerPage()}),loader:({request:t})=>this.productsService.getProducts({offset:t.page*9,limit:t.limit})});static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-products-admin-page"]],decls:23,vars:5,consts:[["selectPerPage",""],[1,"text-2xl","font-bold"],[1,"text-lg"],[1,"text-accent"],[1,"divider"],[1,"flex","gap-2","items-center","h-20"],[3,"pages","currentPage"],[1,"select","select-bordered","w-32",3,"change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"flex","flex-1"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[3,"products"]],template:function(e,n){if(e&1){let s=j();r(0,"h1",1),l(1,"Lista de Productos"),i(),r(2,"h3",2),l(3,"Total De Productos "),r(4,"span",3),l(5),i()(),d(6,"div",4),r(7,"div",5),d(8,"app-pagination",6),r(9,"select",7,0),v("change",function(){z(s);let p=ae(10);return N(n.productsPerPage.set(+p.value))}),r(11,"option",8),l(12,"10"),i(),r(13,"option",9),l(14,"25"),i(),r(15,"option",10),l(16,"50"),i(),r(17,"option",11),l(18,"100"),i()(),d(19,"div",12),r(20,"button",13),l(21," Nuevo Producto "),i()(),d(22,"product-table",14)}if(e&2){let s,m,p;a(5),b((s=n.productsResource.value())==null?null:s.count),a(3),c("pages",(m=(m=n.productsResource.value())==null?null:m.pages)!==null&&m!==void 0?m:0)("currentPage",n.paginationService.currentPage()),a(14),c("products",(p=(p=n.productsResource.value())==null?null:p.products)!==null&&p!==void 0?p:le(4,qe))}},dependencies:[K,Fe,E],encapsulation:2})};var we=(o,t)=>_(void 0,null,function*(){let e=u(O);return yield V(e.checkStatus()),e.isAdmin()});var je=[{path:"",component:H,canMatch:[we],children:[{path:"products",component:W},{path:"products/:id",component:X},{path:"**",redirectTo:"products"}]}],Bt=je;export{je as adminDashboarRoutes,Bt as default};
